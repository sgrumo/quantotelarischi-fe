---
import { NewRoom } from '@/components/challenge/NewRoom'
import { Badge } from '@/components/ui/Badge'
import {
    Card,
    CardDescription,
    CardHeader,
    CardTitle,
} from '@/components/ui/Card'
import BaseLayout from '@/layouts/BaseLayout.astro'
import { getLocaleFromUrl, getTranslations } from '@/lib/utils/i18n'

const locale = getLocaleFromUrl(Astro.url)
const t = getTranslations(locale)
---

<BaseLayout>
    <main class="bg-background min-h-screen">
        <section
            class="relative flex min-h-screen flex-col items-center justify-center px-4 py-8 sm:px-6 sm:py-12"
        >
            <div class="text-center">
                <h1
                    class="font-heading mb-6 text-3xl leading-tight sm:mb-8 sm:leading-none md:text-5xl lg:text-5xl"
                >
                    {t.home.title}
                </h1>
                <p class="font-heading text-xl sm:text-2xl md:text-3xl">
                    {t.home.subtitle}
                </p>
            </div>

            <!-- Scroll Arrow -->
            <a
                href="#instructions"
                class="bg-main border-border rounded-base shadow-shadow absolute bottom-6 left-1/2 flex h-12 w-12 -translate-x-1/2 items-center justify-center border-2 transition-all sm:bottom-12 sm:h-16 sm:w-16 sm:border-4"
                aria-label="Scroll to instructions"
            >
                <svg
                    class="h-6 w-6 sm:h-8 sm:w-8"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="3"
                        d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                </svg>
            </a>
        </section>

        <!-- Instructions Section -->
        <section
            id="instructions"
            class="min-h-screen px-4 py-12 sm:px-6 sm:py-20"
        >
            <div class="mx-auto max-w-4xl">
                <h2
                    class="font-heading mb-8 text-center text-3xl sm:mb-16 sm:text-5xl md:text-6xl"
                >
                    {t.home.howToPlay}
                </h2>

                <div class="mb-8 space-y-4 sm:mb-16 sm:space-y-6">
                    {
                        ['1', '2', '3', '4', '5', '6'].map(num => (
                            <Card>
                                <CardHeader>
                                    <div class="flex items-start gap-3 sm:gap-4">
                                        <Badge className="font-heading shrink-0 px-3 py-1.5 text-lg sm:px-4 sm:py-2 sm:text-2xl">
                                            {num}
                                        </Badge>
                                        <div>
                                            <CardTitle>
                                                {
                                                    t.steps[
                                                        num as keyof typeof t.steps
                                                    ].title
                                                }
                                            </CardTitle>
                                            <CardDescription
                                                set:html={
                                                    t.steps[
                                                        num as keyof typeof t.steps
                                                    ].description
                                                }
                                            />
                                        </div>
                                    </div>
                                </CardHeader>
                            </Card>
                        ))
                    }
                </div>

                <!-- CTA Button -->
                <div class="flex justify-center">
                    <div class="inline-block">
                        <NewRoom client:only="preact" locale={locale} />
                    </div>
                </div>
            </div>
        </section>
    </main>
</BaseLayout>

<style>
    html {
        scroll-behavior: smooth;
    }
</style>
